# my global config
global:
  scrape_interval: {{ prometheus_scrape_interval }}
  evaluation_interval: {{ prometheus_evaluation_interval }}

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - "{{ inventory_hostname }}:9093"

# Load rule files
rule_files:
  - "rules.yml"

scrape_configs:

# Prometheus itself
  - job_name: "prometheus"
    static_configs:
      - targets:
          - "localhost:9090"

  - job_name: "opnsense"
    static_configs:
      - targets:
          - "{{ fw1_loopback }}:9100"
    relabel_configs:
      - source_labels: [__address__]
        regex: "{{ fw1_loopback }}:9100"
        target_label: instance
        replacement: "{{ fw1 }}"
